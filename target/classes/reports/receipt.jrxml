<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="receipt" pageWidth="226" pageHeight="842" columnWidth="206" leftMargin="10" rightMargin="10" topMargin="10" bottomMargin="10" isIgnorePagination="true" uuid="12345678-1234-1234-1234-123456789012">
    <property name="ireport.zoom" value="2.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="ID_TRX" class="java.lang.String"/>
    <queryString>
        <![CDATA[SELECT 
            t.time, 
            i.name, 
            t.quantity, 
            t.total_price, 
            st.total, 
            st.money_in, 
            st.money_change, 
            st.tax, 
            st.total_discount, 
            st.payment_method 
        FROM transactions t 
        JOIN items i ON t.item_id = i.id 
        JOIN sale_transactions st ON t.idTrx = st.idTrx 
        WHERE t.idTrx = $P{ID_TRX}]]>
    </queryString>
    <field name="time" class="java.lang.String"/>
    <field name="name" class="java.lang.String"/>
    <field name="quantity" class="java.lang.Integer"/>
    <field name="total_price" class="java.lang.Integer"/>
    <field name="total" class="java.lang.Integer"/>
    <field name="money_in" class="java.lang.Integer"/>
    <field name="money_change" class="java.lang.Integer"/>
    <field name="tax" class="java.lang.Double"/>
    <field name="total_discount" class="java.lang.Double"/>
    <field name="payment_method" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="60" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="206" height="20" uuid="title-1"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[AQrate Shop]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="20" width="206" height="15" uuid="title-2"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="10"/>
                </textElement>
                <text><![CDATA[Jl. Teknologi No. 1, Jakarta]]></text>
            </staticText>
            <textField>
                <reportElement x="0" y="40" width="206" height="15" uuid="header-1"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA["TRX: " + $P{ID_TRX}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="0" y="58" width="206" height="1" uuid="line-1"/>
                <graphicElement>
                    <pen lineStyle="Dashed"/>
                </graphicElement>
            </line>
        </band>
    </title>
    <columnHeader>
        <band height="15" splitType="Stretch">
            <staticText>
                <reportElement x="0" y="0" width="90" height="15" uuid="col-1"/>
                <textElement>
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Item]]></text>
            </staticText>
            <staticText>
                <reportElement x="90" y="0" width="30" height="15" uuid="col-2"/>
                <textElement textAlignment="Center">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Qty]]></text>
            </staticText>
            <staticText>
                <reportElement x="120" y="0" width="86" height="15" uuid="col-3"/>
                <textElement textAlignment="Right">
                    <font size="8" isBold="true"/>
                </textElement>
                <text><![CDATA[Total]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="15" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="90" height="15" uuid="det-1"/>
                <textElement>
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="90" y="0" width="30" height="15" uuid="det-2"/>
                <textElement textAlignment="Center">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0">
                <reportElement x="120" y="0" width="86" height="15" uuid="det-3"/>
                <textElement textAlignment="Right">
                    <font size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{total_price}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <summary>
        <band height="100" splitType="Stretch">
            <line>
                <reportElement x="0" y="2" width="206" height="1" uuid="line-2"/>
                <graphicElement>
                    <pen lineStyle="Dashed"/>
                </graphicElement>
            </line>
            <staticText>
                <reportElement x="0" y="10" width="100" height="15" uuid="sum-1"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Total:]]></text>
            </staticText>
            <textField pattern="#,##0">
                <reportElement x="106" y="10" width="100" height="15" uuid="val-1"/>
                <textElement textAlignment="Right">
                    <font size="9" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
            </textField>
            
            <staticText>
                <reportElement x="0" y="25" width="100" height="15" uuid="sum-2"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Tax:]]></text>
            </staticText>
            <textField pattern="#,##0">
                <reportElement x="106" y="25" width="100" height="15" uuid="val-2"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{tax}]]></textFieldExpression>
            </textField>
            
             <staticText>
                <reportElement x="0" y="40" width="100" height="15" uuid="sum-3"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Discount:]]></text>
            </staticText>
            <textField pattern="#,##0">
                <reportElement x="106" y="40" width="100" height="15" uuid="val-3"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{total_discount}]]></textFieldExpression>
            </textField>

            <staticText>
                <reportElement x="0" y="55" width="100" height="15" uuid="sum-4"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Paid:]]></text>
            </staticText>
            <textField pattern="#,##0">
                <reportElement x="106" y="55" width="100" height="15" uuid="val-4"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{money_in}]]></textFieldExpression>
            </textField>
            
            <staticText>
                <reportElement x="0" y="70" width="100" height="15" uuid="sum-5"/>
                <textElement>
                    <font size="9"/>
                </textElement>
                <text><![CDATA[Change:]]></text>
            </staticText>
             <textField pattern="#,##0">
                <reportElement x="106" y="70" width="100" height="15" uuid="val-5"/>
                <textElement textAlignment="Right">
                    <font size="9"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{money_change}]]></textFieldExpression>
            </textField>
            
            <textField>
                <reportElement x="0" y="85" width="206" height="15" uuid="footer-1"/>
                <textElement textAlignment="Center" verticalAlignment="Bottom">
                    <font size="8" isItalic="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Payment: " + $F{payment_method}]]></textFieldExpression>
            </textField>
        </band>
    </summary>
</jasperReport>
